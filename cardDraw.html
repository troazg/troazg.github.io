<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Card Draw</title>
    <link rel="stylesheet" type="text/css" href="cardCSS.css">
  </head>
  <body>
		<h2>Card Draw</h2>

		<div class="flip-container" id="deck">
			<div class="blankCard" id="blankCard" onclick="storeAndFlip()"></div>
			<div class="flipper" id="card">
				<div class="back" id="back" onclick="flipCard()">
					<p>Back of the card</p>
				</div>
				<div class="front" id="front" onclick="storeCard()">
					<p>Front of the card</p>
					<div id="suitIcon"></div>
					<div id="cardValue">Q</div>
				</div>
			</div>

			
		</div>

  </body>
</html>

<script type="text/javascript">

let card = document.getElementById('card');
let front = document.getElementById('front');
let back = document.getElementById('back');

let JSONString = "";

function loadDeck() {
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			JSONString = this.responseText;
		}
	};
	xhttp.open("GET", "cards.json", true);
	xhttp.send();
}

loadDeck();

var JSONdata = JSON.parse(JSONString);

var deck = new Array;

//Turn 2 dimentional array into 1 dimentional array
for (i = 0; i < JSONdata['deck'].length; i++) {
	deck[i] = JSONdata['deck'][i];
}

function drawCard() {
	let cardId = Math.floor((Math.random() * 52) + 1);
	let cardValue = '';

	switch(deck[cardId].value) {
		case 1:
			cardValue = 'A';
			break;
		case 11:
			cardValue = 'J';
			break;
		case 12:
			cardValue = 'Q';
			break;
		case 13:
			cardValue = 'K';
			break;
		default:
			cardValue = deck[cardId].value;
	}
}

function flipCard() {
	card.classList.add('flipped');
}

function storeCard() {
	card.classList.add('stowed');
			
	setTimeout(function() {
		card.classList.remove('flipped');
		card.classList.remove('stowed');
		card.classList.add('low');
	}, 1600);

	setTimeout(function() {
		card.classList.remove('low');
	}, 1650);
}

function storeAndFlip() {
	storeCard();
	setTimeout(function() {
		flipCard();
	}, 1700);
}


</script>
